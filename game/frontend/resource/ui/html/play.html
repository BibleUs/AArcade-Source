<html>
	<head>
		<link rel="stylesheet" type="text/css" href="asset://ui/hud.css"></link>
		<script src="asset://ui/hud.js"></script>
	</head>
	<body>
		<div class="hudContent" style="width: 80%; height: 70%; position: fixed; left: 0; right: 0; top: 50%; -webkit-transform: translate(0, -50%);">
			<div class="hudContentHeader">
				<div class="hudContentHeaderRow">
					<div class="hudContentHeaderCell">
						<div class="hudContentHeaderButton helpNote" style="display: block;" onclick="window.location='asset://ui/welcome.html';" help="Go back to the previous menu.">
							&nbsp;<img src="asset://ui/backarrow.png" />&nbsp;
						</div>
					</div>
					<div class="hudContentHeaderCell">
						Play
					</div>
					<div class="hudContentHeaderCell">
						<div class="hudContentHeaderButton helpNote" onclick="window.location='asset://ui/blank.html';" help="Close this menu, but leave the HUD open.">
							&nbsp;<img src="asset://ui/xicon.png" />&nbsp;
						</div>
					</div>
				</div>
			</div>

			<div style="height: 90%;">
				<div id="mapsContainer"></div>
			</div>
		</div>

		<a href="javascript:location.reload();" class="devReload">&bull;&nbsp;</a>

		<script>
			var mapsContainer = document.querySelector("#mapsContainer");

			var screenshots = aaapi.system.detectAllMapScreenshots();
			var mapz = aaapi.system.getAllMaps();

			var maps = new Array();
			for( var y in mapz )
				maps.push(mapz[y]);

			maps.sort(function(a, b)
				{
					if( a.platforms[arcadeHud.platformId].file < b.platforms[arcadeHud.platformId].file)
						return -1;
					else if( a.platforms[arcadeHud.platformId].file > b.platforms[arcadeHud.platformId].file )
						return 1;
					else
						return 0;
				});

			var count = 0;
			var x, mapName, mapContainer, mapImage, mapTitle, mapTitleNode;
			//for( x in maps )
			var x;
			for( x = 0; x < maps.length; x++)
			{
				//x = maps[i].info.id;
				mapName = maps[x].platforms[arcadeHud.platformId].file;
				mapName = mapName.substring(0, mapName.length-4);

				mapContainer = document.createElement("div");
				mapContainer.className = "mapThumbContainer";
				mapContainer.map = maps[x];
				mapContainer.addEventListener("click", function(e)
				{
					window.location = "asset://ui/playInstance.html?id=" + this.map.info.id;
					//aaapi.system.deactivateInputMode();
					//aaapi.system.loadMap(this.map.info.id);
				}.bind(mapContainer), true);

				mapImage = document.createElement("img");
				if( false && !!screenshots[mapName] )
					mapImage.src = "asset://screenshots/" + screenshots[mapName];
				else
					mapImage.src = "asset://ui/map.jpg";

				mapContainer.appendChild(mapImage);

				mapTitle = document.createElement("div");
				mapTitleNode = document.createTextNode(maps[x].title);

				mapTitle.appendChild(mapTitleNode);
				mapContainer.appendChild(mapTitle);

				mapsContainer.appendChild(mapContainer);
				count++;
			}
		</script>
	</body>
</html>