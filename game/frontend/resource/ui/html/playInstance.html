<html>
	<head>
		<link rel="stylesheet" type="text/css" href="asset://ui/hud.css"></link>
		<script src="asset://ui/hud.js"></script>
	</head>
	<body>
		<div class="hudHeaderContainer">
			<div class="hudHeaderNavigationContainer">
				helloo world
			</div>
			<div class="hudHeaderContainerTable">
				<div class="hudHeaderContainerRow">
					<div class="hudHeaderContainerCell">
					</div>
					<div class="hudHeaderContainerCell">
						<div class="hudHeaderButtonContainer">
							<div class="hudHeaderButton hudHeaderButtonOn helpNote" help="Expand the address bar." onclick="arcadeHud.expandAddressMenu();">
								AArcade
							</div>
						</div>
					</div>
					<div class="hudHeaderContainerCell">
						<div class="hudHeaderButtonContainer">
							<div class="hudHeaderButton hudHeaderButtonOn helpNote" help="Hide the main menu." onclick="window.location='asset://ui/blank.html';">
								&nbsp;<img src="asset://ui/menuicon.png" />&nbsp;
							</div>
						</div>
						<div id="returnHudButton" class="hudHeaderButtonContainer" style="right: 20%;">
							<div class="hudHeaderButton hudHeaderButtonOn helpNote" help="Unpin & close the HUD." onclick="aaapi.system.deactivateInputMode();">
								&nbsp;<img src="asset://ui/pinicon.png" />&nbsp;
							</div>
						</div>
						<div id="pinHudButton" class="hudHeaderButtonContainer" style="right: 20%;">
							<div class="hudHeaderButton helpNote" help="Pin the HUD to stay open." onclick="aaapi.system.forceInputMode(); arcadeHud.pinHudButtonElem.style.display = 'none'; arcadeHud.returnHudButtonElem.style.display = 'inline-block';">
								&nbsp;<img src="asset://ui/pinicon.png" />&nbsp;
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="hudContent" style="width: 20%; position: fixed; left: 0; right: 0; top: 50%; -webkit-transform: translate(0, -50%);">
			<div class="hudContentHeader">
				<div class="hudContentHeaderRow">
					<div class="hudContentHeaderCell">
						<div class="hudContentHeaderButton helpNote" style="display: block;" onclick="window.location='asset://ui/play.html';" help="Go back to the previous menu.">
							&nbsp;<img src="asset://ui/backarrow.png" />&nbsp;
						</div>
					</div>
					<div class="hudContentHeaderCell">
						Play / Instance
					</div>
					<div class="hudContentHeaderCell">
						<div class="hudContentHeaderButton helpNote" onclick="window.location='asset://ui/blank.html';" help="Close this menu, but leave the HUD open.">
							&nbsp;<img src="asset://ui/xicon.png" />&nbsp;
						</div>
					</div>
				</div>
			</div>

			<div id="mapTitle"></div>

			<select id="instanceSelect" style="width: 100%;"></select>

			<div class="mainButton" onclick="play();">Play</div>
		</div>



<!--		<div class="backButton">Back</div> -->
		<a href="javascript:location.reload();" class="devReload">&bull;</a>
		<script>
// http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

			var titleElem = document.body.querySelector("#mapTitle");
			var mapId = getParameterByName("id");
			//var map = aaapi.metaverse.getMap(mapId);
			//titleElem.innerText = map.title;

			var instances = aaapi.system.getMapInstances(mapId);
			var selectElem = document.body.querySelector("#instanceSelect");

			var instance;
			var elem;
			var i;
			for( i = 0; i < instances.length; i++)
			{
				instance = instances[i];

				elem = document.createElement("option");
				elem.value = instance.id;
				elem.text = instance.title;
				//elem.text = instance.file.substring(instance.file.lastIndexOf("\\"));

				selectElem.appendChild(elem);
			}

			elem = document.createElement("option");
			elem.value = "";
			elem.text = "<Create New Instance>";
			//elem.text = instance.file.substring(instance.file.lastIndexOf("\\"));

			selectElem.appendChild(elem);

			//loadingManager.init();

			function play()
			{
				aaapi.system.deactivateInputMode();
				aaapi.system.loadMap(mapId, selectElem.options[selectElem.selectedIndex].value);
			}
		</script>
	</body>
</html>