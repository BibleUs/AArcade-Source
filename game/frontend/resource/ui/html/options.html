<html>
	<head>
		<link rel="stylesheet" type="text/css" href="asset://ui/hud.css"></link>
		<script src="asset://ui/hud.js"></script>
		<style>
			.inputOptionToggle
			{
				display: inline-block;
				width: 60px;
				height: 20px;
				vertical-align: middle;
				border-radius: 6px;
				border-style: solid;
				border-width: 2px;
			}

			.inputOptionToggle div
			{
				display: inline-block;
				width: 24px;
				height: 14px;
				float: left;
				border-style: solid;
				border-width: 3px;
				border-radius: 4px;
				vertical-align: middle;
			}

			.inputOptionToggle:hover
			{
			}

			.inputOptionToggle div.toggleSwitchOn
			{
				float: right;
			}

			.inputOptionToggle:hover div
			{
			}

			.inputOptionToggle:hover div.toggleSwitchOn
			{
			}

			.inputOptionTitle
			{
				display: inline-block;
				vertical-align: middle;
				margin-right: 10px;
				color: #999;
				font-style: italic;
			}

			.inputOptionContainer
			{
				display: inline-block;
				float: right;
				vertical-align: middle;
				margin-right: 5px;
			}

			.toggleButton
			{
				display: inline-block;
				float: right;
				vertical-align: middle;
				margin: 0;
				margin-right: 5px;
				border: 2px solid pink;
			}

			.inputOptionContainer input
			{
				background-color: transparent;
				border: 1px solid red;
				font-family: Arial;
				font-weight: 900;
				font-size: 18px;
				padding-left: 2px;
				padding-right: 2px;
				color: #bbb;
				background-color: rgb(8, 8, 8);
				border-radius: 6px;
				border: 3px solid rgb(30, 30, 30);
				border-top: 3px solid rgb(50, 50, 50);
				border-left: 3px solid rgb(50, 50, 50);
				text-align: right;
			}

			.inputOptionContainer:hover input
			{
				border: 3px solid rgb(40, 40, 40);
				border-top: 3px solid rgb(70, 70, 70);
				border-left: 3px solid rgb(70, 70, 70);
			}

			.categoryContainer
			{
				width: 100%;
				background-color: rgba(50, 50, 50, 0.5);
				font-weight: bold;
				font-family: Arial;
				border-radius: 10px;
			}

			.categoryTitle
			{
				padding: 10px;
				letter-spacing: 0.2em;
				font-style: italic;
			}

			.optionContainer
			{
				font-weight: bold;
				font-family: Arial;
				padding: 8px;
				height: 25px;
				border-radius: 10px;
				background-color: rgba(10, 10, 10, 0.5);
			}

			.optionContainer:nth-child(even)
			{
				background-color: rgba(30, 30, 30, 0.3);
			}

			.optionTitle
			{
				float: left;
				margin-left: 5px;
			}

			.optionsContainer
			{
				margin-left: 15px;
				margin-right: 15px;
				margin-bottom: 15px;
			}

			input[type=range]
			{
	    		-webkit-appearance: none;
				/*background-color: #ddd;*/
	    		border-radius: 3px;
	    		/*border: 1px solid #bbb;*/
	    		border-style: solid;
	    		border-width: 1px;
	    		height: 8px;
	    		border-color: #bbb;
	    		/*
	    		border-top-color: #bbb;
	    		border-left-color: #bbb;
	    		border-bottom-color: #bbb;
	    		border-right-color: #bbb;
	    		*/
			}

			input[type=range]::-webkit-slider-runnable-track
			{
				border: 0;
				background-color: transparent;
			}

			input[type=range]::-webkit-slider-thumb
			{
				-webkit-appearance: none;
				width: 15px;
				height: 24px;
				background-color: #ddd;
				border: 1px solid #bbb;
				border-radius: 20%;
			}

			input[type=range]:hover::-webkit-slider-thumb
			{
				background-color: #E5F1FB;
				border: 1px solid #0078D7;
			}
/*
			input[type=range]:focus::-webkit-slider-thumb
			{
				background-color: rgb(250, 50, 50);
			}

			input[type=range]:focus
			{
			    outline: none;
			}

			input[type=range]:focus::-webkit-slider-runnable-track
			{

			}
*/
		</style>
	</head>
	<body>

		<div style="pointer-events: none; position: absolute; left: 0; top: 0; right: 0; bottom: 0;">
		<table style="width: 100%; height: 100%;">
		<tr ><td valign="middle" align="center">
		<div style="display: inline-block;">

		<script>
			var windowHeaderHTML = arcadeHud.generateWindowHeaderHTML("Options", "", false, true, "window.location='asset://ui/welcome.html';", "aaapi.system.deactivateInputMode();");
			document.write(windowHeaderHTML);
		</script>

		<form id="entryForm" style="margin: 0;">

		<script>
			// prefer a tab ID given in the URL
			var tabId = arcadeHud.getParameterByName("tab");

			// otherwise, use session storage (disabled here)
			//if( !!!tabId )
			//	tabId = sessionStorage.getItem("aaMainTab", tabId);

			// otherwise, let arcadeHud decide
			if( !!!tabId )
				tabId = "";

			var windowTabsHeaderHTML = arcadeHud.generateWindowTabsHeaderHTML({
				"tabs": [
					{
						"id": "general",
						"title": "General"
					},
					{
						"id": "sound",
						"title": "Sound"
					},
					{
						"id": "camera",
						"title": "Camera"
					},
					{
						"id": "ui",
						"title": "UI"
					},
					{
						"id": "libretro",
						"title": "Libretro"
					},
					{
						"id": "kodi",
						"title": "Kodi"
					},
					{
						"id": "broadcast",
						"title": "Broadcast"
					},
					{
						"id": "engine",
						"title": "Engine"
					}
				],
				"activeTabId": tabId
			});
			document.write(windowTabsHeaderHTML);

			function configLibretro()
			{
				window.location='asset://ui/libretroConfig.html?uiback=' + encodeURIComponent("window.location='asset://ui/options.html?tab=libretro';");
			}
		</script>

		<div class="aaTabContent aaThemeColorTwoHighBackgroundColor aaThemeColorTwoLowBorderColor" tabid="general">
			<table class="aaKeyValueTable" style="width: 100%;" cellspacing="0"></table>
		</div>

		<div class="aaTabContent aaThemeColorTwoHighBackgroundColor aaThemeColorTwoLowBorderColor" tabid="sound">
			<table class="aaKeyValueTable" style="width: 100%;" cellspacing="0"></table>
		</div>

		<div class="aaTabContent aaThemeColorTwoHighBackgroundColor aaThemeColorTwoLowBorderColor" tabid="camera">
			<table class="aaKeyValueTable" style="width: 100%;" cellspacing="0"></table>
		</div>

		<div class="aaTabContent aaThemeColorTwoHighBackgroundColor aaThemeColorTwoLowBorderColor" tabid="ui">
			<table class="aaKeyValueTable" style="width: 100%;" cellspacing="0"></table>
		</div>

		<div class="aaTabContent aaThemeColorTwoHighBackgroundColor aaThemeColorTwoLowBorderColor" tabid="libretro">
			<table class="aaKeyValueTable" style="width: 100%;" cellspacing="0"></table>
			<input class="aaButton aaBigButton aaTitleTextSizeFontSize aaThemeColorTwoHoverShadedBackground aaTextColorTwoColor aaThemeColorTwoLowBorderColor helpNote" onclick="configLibretro();" help="Each Libretro core can be configured independently." value="Configure Libretro Cores" />
		</div>

		<div class="aaTabContent aaThemeColorTwoHighBackgroundColor aaThemeColorTwoLowBorderColor" tabid="kodi">
			<table class="aaKeyValueTable" style="width: 100%;" cellspacing="0"></table>
		</div>

		<div class="aaTabContent aaThemeColorTwoHighBackgroundColor aaThemeColorTwoLowBorderColor" tabid="broadcast">
			<table class="aaKeyValueTable" style="width: 100%;" cellspacing="0"></table>
		</div>

		<div class="aaTabContent aaThemeColorTwoHighBackgroundColor aaThemeColorTwoLowBorderColor" tabid="engine">
			<input type="button" class="aaButton aaBigButton aaTitleTextSizeFontSize aaThemeColorTwoHoverShadedBackground aaTextColorTwoColor aaThemeColorTwoLowBorderColor helpNote" value="Source Engine Options" onclick="aaapi.system.showEngineOptionsMenu();" help="Change keybinds, texture quality, or other Source engine options. Use AArcade's launcher to change resolutions." /><br />
		</div>

		<script>
			var windowTabsFooterHTML = arcadeHud.generateWindowTabsFooterHTML();
			document.write(windowTabsFooterHTML);
		</script>

		<table class="aaWindowActions" style="position: absolute; pointer-events: none; visibility: hidden;">
			<tr>
				<td>
				</td>
				<td style="width: 1%; white-space: nowrap;">
					<input type="button" class="aaButton aaTextSizeFontSize aaThemeColorTwoHoverShadedBackground aaTextColorTwoColor aaThemeColorTwoLowBorderColor" value="OK" />
					<input type="button" class="aaButton aaTextSizeFontSize aaThemeColorTwoHoverShadedBackground aaTextColorTwoColor aaThemeColorTwoLowBorderColor" value="Cancel" />
					<input type="submit" class="aaButton aaButtonDisabled aaTextSizeFontSize aaThemeColorTwoHoverShadedBackground aaTextColorTwoColor aaThemeColorTwoLowBorderColor" value="Apply" />
				</td>
			</tr>
		</table>
		</form>

		<script>
			var windowFooterHTML = arcadeHud.generateWindowFooterHTML();
			document.write(windowFooterHTML);
		</script>

		</div>
		</td></tr>
		</table>
		</div>

		<a href="javascript:location.reload();" class="devReload">&bull;&nbsp;</a>

		<script>
			var entryForm = document.querySelector("#entryForm");
			entryForm.addEventListener("submit", function(e)
			{
				e.preventDefault();

				var focusedElem = document.activeElement;
				if( !!focusedElem && !!focusedElem.inputOption )
				{
					var option = focusedElem.inputOption;
					focusedElem.style.webkitTransition = "initial";
					focusedElem.classList.add("aaThemeColorOneBackgroundColor");
					focusedElem.offsetTop;
					focusedElem.style.webkitTransition = "background-color 0.5s ease-in-out";
					focusedElem.classList.remove("aaThemeColorOneBackgroundColor");

					onInputOptionTextFormSubmit(option, focusedElem.value);
					focusedElem.blur();
				}
			}.bind(entryForm), true);

			var categories = {
				"general":
				{
					"weapons":
					{
						"title": "Allow Weapons",
						"type": "toggle",
						"help": "If you want to shoot stuff, you'll need to enable weapons. This will also turn on the game HUD & POV models.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("allow_weapons");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							if( this.value === "1" )//aaapi.system.consoleCommand("allow_weapons " + this.value);
								aaapi.system.consoleCommand("enable_weapons");
							else
								aaapi.system.consoleCommand("disable_weapons");

						}
					},
					/*"visible_hands":
					{
						"title": "Show Player Hands",
						"type": "toggle",
						"help": "You don't really need to SEE your hands, unless you're trying to shoot stuff.",
						"valueTitles": {"0": "Hidden", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("r_drawviewmodel");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("r_drawviewmodel " + this.value);
						}
					},*/
					"hdr":
					{
						"title": "Show HDR Lighting",
						"type": "toggle",
						"help": "HDR simulates your pupils adjusting to lighting conditions.  Turning it off can fix how some maps look.",
						"valueTitles": {"0": "Disabled", "2": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("mat_hdr_level");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("mat_hdr_level " + this.value);
						}
					},
					"reflections":
					{
						"title": "Show Surface Reflections",
						"type": "toggle",
						"help": "Reflections look nice, but sometimes they cause over-bright props or hard-to-see screens.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("mat_fastspecular");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("mat_fastspecular " + this.value);
						}
					},
					"buildghosts":
					{
						"title": "Use Transparency When Moving Objects",
						"type": "toggle",
						"help": "Transparency can make it easy to see what you're doing, but some models become COMPLETELY invisible when this is on.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("build_ghosts");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("build_ghosts " + this.value);
						}
					},
					"console":
					{
						"title": "Developer Console Output",
						"type": "toggle",
						"help": "WARNING - Turning this on can cause a performance impact, plus spam you with irrelevant notifications.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("developer");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("developer " + this.value);
						}
					},
					"autoload":
					{
						"title": "AArcade Startup Behavior",
						"type": "toggle",
						"help": "AArcade can automatically load into the most recent map that you visited after it starts up.",
						"valueTitles": {"0": "Show Main Menu", "1": "Load Most Recent Map"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("auto_load_map");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("auto_load_map " + this.value);
						}
					},
					"startup":
					{
						"title": "Run AArcade When Windows Starts",
						"type": "toggle",
						"help": "This will automatically start AArcade when your computer starts up.<br /><br />Adds a single value to your registry at:<br /><font size='3'>HKEY_LOCAL_MACHINE/SOFTWARE/Microsoft/Windows/CurrentVersion/Run/AArcade</font>",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.checkStartWithWindows();
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.setStartWithWindows(this.value);
						}
					}
				},
				"sound":
				{
					"worldsound":
					{
						"title": "World Sound",
						"type": "select",
						"help": "Often times the environment sounds can be a bit much.",
						"valueTitles": {"enabled": "Enabled (Always)", "focused": "Enabled (Focused Only)", "disabled": "Muted"},
						"value": null,
						"getValue": function()
						{
							var volumeVal = aaapi.system.getConVarValue("volume");
							var muteLoseFocusVal = aaapi.system.getConVarValue("snd_mute_losefocus");
							var val;
							if( volumeVal == 0 )
								val = "disabled";
							else if( muteLoseFocusVal == 0 )
								val = "enabled";
							else
								val = "focused";

							this.value = val;
							this.oldVolume = volumeVal;
							this.oldMuteLoseFocus = muteLoseFocusVal;
						},
						"setValue": function(val)
						{
							this.value = val;

							// only adjust the volume when needed!
							var volumeCommand = "";
							var focusCommand = "";
							if( val == "disabled" )
							{
								if( categories.sound.volume.value > 0 )
								{
									categories.sound.volume.value = 0;
									volumeCommand = "volume 0; ";

									// update volume slider too!
									var elems = document.querySelectorAll("input[type='range']");
									for( var i = 0; i < elems.length; i++ )
									{
										if( elems[i].inputOption === categories.sound.volume )
										{
											elems[i].inputOption.value = categories.sound.volume.value;
											elems[i].value = categories.sound.volume.value;
											onSlide.call(elems[i]);

											elems[i].style.backgroundColor = "";
											elems[i].style.webkitTransition = "initial";
											elems[i].classList.add("aaThemeColorOneBackgroundColor");
											elems[i].offsetTop;
											elems[i].style.webkitTransition = "background-color 0.5s ease-in-out";
											elems[i].classList.remove("aaThemeColorOneBackgroundColor");
											elems[i].style.backgroundColor = "#ddd";
											break;
										}
									}
								}
							}
							else if( val == "enabled" )
							{
								if( categories.sound.volume.value == 0 )
								{
									categories.sound.volume.value = 1;
									volumeCommand = "volume 1; ";

									// update volume slider too!
									var elems = document.querySelectorAll("input[type='range']");
									for( var i = 0; i < elems.length; i++ )
									{
										if( elems[i].inputOption === categories.sound.volume )
										{
											elems[i].inputOption.value = categories.sound.volume.value;
											elems[i].value = categories.sound.volume.value;
											onSlide.call(elems[i]);
											
											elems[i].style.backgroundColor = "";
											elems[i].style.webkitTransition = "initial";
											elems[i].classList.add("aaThemeColorOneBackgroundColor");
											elems[i].offsetTop;
											elems[i].style.webkitTransition = "background-color 0.5s ease-in-out";
											elems[i].classList.remove("aaThemeColorOneBackgroundColor");
											elems[i].style.backgroundColor = "#ddd";
											break;
										}
									}
								}

								if( this.oldMuteLoseFocus == 1 )
								{
									this.oldMuteLoseFocus = 0;
									focusCommand = "snd_mute_losefocus 0;";
								}
							}
							else if( val == "focused" )
							{
								if( categories.sound.volume.value == 0 )
								{
									categories.sound.volume.value = 1;
									volumeCommand = "volume 1; ";

									// update volume slider too!
									var elems = document.querySelectorAll("input[type='range']");
									for( var i = 0; i < elems.length; i++ )
									{
										if( elems[i].inputOption === categories.sound.volume )
										{
											elems[i].inputOption.value = categories.sound.volume.value;
											elems[i].value = categories.sound.volume.value;
											onSlide.call(elems[i]);
											
											elems[i].style.backgroundColor = "";
											elems[i].style.webkitTransition = "initial";
											elems[i].classList.add("aaThemeColorOneBackgroundColor");
											elems[i].offsetTop;
											elems[i].style.webkitTransition = "background-color 0.5s ease-in-out";
											elems[i].classList.remove("aaThemeColorOneBackgroundColor");
											elems[i].style.backgroundColor = "#ddd";
											break;
										}
									}
								}

								if( this.oldMuteLoseFocus == 0 )
								{
									this.oldMuteLoseFocus = 1;
									focusCommand = "snd_mute_losefocus 1;";
								}
							}

							aaapi.system.consoleCommand(volumeCommand + focusCommand);
						}
					},
					"volume":
					{
						"title": "World Volume",
						"type": "slider",
						"sliderMin": 0,
						"sliderMax": 1,
						"sliderStep": 0.1,
						"help": "Adjust the volume of world environment sounds.",
						"valueTitles": {"0": "Muted"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("volume");
							this.value = val;
						},
						"setValue": function(val)
						{
							var elems = document.querySelectorAll("select");
							for( var i = 0; i < elems.length; i++ )
							{
								if( elems[i].inputOption === categories.sound.worldsound )
								{
									if( val > 0 && elems[i].value === "disabled" )
									{
										if( categories.sound.worldsound.oldMuteLoseFocus == 1 )
											elems[i].value = "focused";
										else
											elems[i].value = "enabled";

										elems[i].style.webkitTransition = "initial";
										elems[i].classList.add("aaThemeColorOneBackgroundColor");
										elems[i].offsetTop;
										elems[i].style.webkitTransition = "background-color 0.5s ease-in-out";
										elems[i].classList.remove("aaThemeColorOneBackgroundColor");
									}
									else if( val == 0 && elems[i].value !== "disabled" )
									{
										elems[i].value = "disabled";
											
										elems[i].style.webkitTransition = "initial";
										elems[i].classList.add("aaThemeColorOneBackgroundColor");
										elems[i].offsetTop;
										elems[i].style.webkitTransition = "background-color 0.5s ease-in-out";
										elems[i].classList.remove("aaThemeColorOneBackgroundColor");
									}
									break;
								}
							}

							this.value = val;
							aaapi.system.consoleCommand("volume " + this.value);
						}
					}
				},
				"camera":
				{
					"cameramode":
					{
						"title": "Camera Mode",
						"type": "select",
						"help": "Choose which kind of camera perspective to use.",
						"valueTitles": {"firstperson": "Firstperson", "thirdperson": "Thirdperson", "placeholder": "Change Camera Mode..."},
						"value": null,
						"getValue": function()
						{
							this.value = "";
						},
						"setValue": function(val)
						{
							aaapi.system.consoleCommand(val);
						}
					},
					"camyaw":
					{
						"title": "Camera YAW",
						"type": "slider",
						"sliderMin": -130,
						"sliderMax": 130,
						"sliderStep": 1.0,
						"help": "Cam YAW.",
						"valueTitles": {},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("cam_idealyaw");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("cam_idealyaw " + this.value);
						},
						"onSlide": function(val)
						{
							this.setValue(val);
						}
					},
					"campitch":
					{
						"title": "Camera Pitch",
						"type": "slider",
						"sliderMin": 0,
						"sliderMax": 90,
						"sliderStep": 1.0,
						"help": "Cam Pitch.",
						"valueTitles": {},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("cam_idealpitch");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("cam_idealpitch " + this.value);
						},
						"onSlide": function(val)
						{
							this.setValue(val);
						}
					},
					"camdist":
					{
						"title": "Camera Distance",
						"type": "slider",
						"sliderMin": 50,
						"sliderMax": 1000,
						"sliderStep": 1.0,
						"help": "Cam distance.",
						"valueTitles": {},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("cam_idealdist");
							console.log(val);
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("cam_idealdist " + this.value + "; thirdperson;");
						},
						"onSlide": function(val)
						{
							this.setValue(val);
						}
					},
					"camhoriz":
					{
						"title": "Camera Horizontal",
						"type": "slider",
						"sliderMin": -100,
						"sliderMax": 100,
						"sliderStep": 1.0,
						"help": "Cam horizontal.",
						"valueTitles": {},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("cam_idealdistright");
							console.log(val);
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("cam_idealdistright " + this.value + "; thirdperson;");
						},
						"onSlide": function(val)
						{
							this.setValue(val);
						}
					},
					"camspeed":
					{
						"title": "Camera Smooth",
						"type": "slider",
						"sliderMin": 4.0,
						"sliderMax": 200.0,
						"sliderStep": 1.0,
						"help": "Cam zpeed.",
						"valueTitles": {},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("cam_ideallag");
							console.log(val);
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("cam_ideallag " + this.value);
						}
					}
				},
				"ui":
				{
					/*
					"hud":
					{
						"title": "Game & Weapon HUD",
						"type": "toggle",
						"help": "Hiding the HUD is less clutter, but it also hides your crosshair!",
						"valueTitles": {"0": "Hidden", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("cl_drawhud");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("cl_drawhud " + this.value);
						}
					},*/
					"hovertitles":
					{
						"title": "Hover Titles",
						"type": "toggle",
						"help": "Show the title of items when you hover over their cabinets.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("cl_hovertitles");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("cl_hovertitles " + this.value);
						}
					},
					"toast":
					{
						"title": "Event Notifications",
						"type": "toggle",
						"help": "Show important events in the top-left portion of the screen, such as when a new Web Browser is opened.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("cl_toastmsgs");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("cl_toastmsgs " + this.value);
						}
					},
					"colorScheme":
					{
						"title": "Color Scheme",
						"type": "select",
						"help": "Change the colors that the UI uses.",
						"valueTitles": {"redBaron": "Red Baron", "redBaronDark": "Red Baron (Dark)", "fiftyShades": "Fifty Shades", "fiftyShadesDark": "Fifty Shades (Dark)", "windowsWannabe": "Windows Wannabe", "windowsWannabeDark": "Windows Wannabe (Dark)"},
						"value": null,
						"getValue": function()
						{
							var themeName = localStorage.getItem("aaColorThemeName");
							this.value = themeName;
							//var val = aaapi.system.getConVarValue("cl_drawhud");
							//this.value = val;
						},
						"setValue": function(val)
						{
							var themeName = val;
							if( !!!themeName || !!!arcadeHud.themes[themeName] )
								themeName = "redBaron";

							localStorage.setItem("aaColorThemeName", themeName);
							this.value = themeName;
							window.location = "asset://ui/options.html?tab=ui";
							//location.reload();
							//this.value = val;
							//aaapi.system.consoleCommand("cl_drawhud " + this.value);
						}
					},
					"startupWallpaper":
					{
						"title": "Startup Wallpaper",
						"type": "webfile",
						"help": "Customize what is shown while AArcade starts up.",
						"valueTitles": {"placeholder": "Browse or paste URL"},
						"value": null,
						"getValue": function()
						{
							var startupWallpaper = localStorage.getItem("aaStartupWallpaper");
							if( !startupWallpaper )
								startupWallpaper = "";

							this.value = startupWallpaper;
						},
						"setValue": function(val)
						{
							if( val !== this.value )
							{
								localStorage.setItem("aaStartupWallpaper", val);
								this.value = val;
								window.location = "asset://ui/options.html?tab=ui";
							}
						}
					}
				},
				"libretro":
				{
					"autolibretro":
					{
						"title": "Auto Run w/ Libretro",
						"type": "toggle",
						"help": "Automatically run compatible shortcuts on the in-game screens w/ Libretro.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("auto_libretro");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("auto_libretro " + this.value);
						}
					},
					"waitforlibretro":
					{
						"title": "Wait For Libretro To Close",
						"type": "toggle",
						"help": "This allows AArcade to hang while Libretro cores finish closing. Having this enabled allows you to directly switch between Libretro cabinets. (If it is disabled, you'll have to deselect one Libretro cabinet prior to selecting the next one.)",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("wait_for_libretro");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("wait_for_libretro " + this.value);
						}
					}
				},
				"kodi":
				{
					"kodi_enable":
					{
						"title": "Enable Kodi Video Playback",
						"type": "toggle",
						"help": "Instead of opening normally when you click PLAY, video files can be sent to Kodi via the Web Server feature in Kodi's Options > Services > Web Server menu.  The info you enter on that Kodi menu is what you type into AArcade's option boxes here. You should be running Kodi on the same PC as AArcade because the file location of the video needs to be the same.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("kodi");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("kodi " + this.value);
						}
					},
					"kodi_ip":
					{
						"title": "Kodi IP",
						"type": "text",
						"help": "If you use Kodi, this is the IP of the PC running Kodi.  Usually your own LAN IP.",
						"valueTitles": {"placeholder": ""},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("kodi_ip");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("kodi_ip \"" + this.value + "\"");
						}
					},
					"kodi_port":
					{
						"title": "Kodi Port",
						"type": "text",
						"help": "If you use Kodi, this would be the same as what you have in Kodi's Options > Services > Web Server menu for PORT.",
						"valueTitles": {"placeholder": ""},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("kodi_port");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("kodi_port \"" + this.value + "\"");
						}
					},
					"kodi_user":
					{
						"title": "Kodi User",
						"type": "text",
						"help": "If you use Kodi, this would be the same as what you have in Kodi's Options > Services > Web Server menu for USERNAME.",
						"valueTitles": {"placeholder": ""},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("kodi_user");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("kodi_user \"" + this.value + "\"");
						}
					},
					"kodi_password":
					{
						"title": "Kodi Password",
						"type": "text",
						"help": "If you use Kodi, this would be the same as what you have in Kodi's Options > Services > Web Server menu for PASSWORD.  Note that the Kodi web server API is accessed through GET requests, so your password is NOT encrypted and therfore NOT private and stored in a PUBLIC Source engine console variable.  Do NOT use a real password on your Kodi Web Server if you're using it for LAN stuff like this.",
						"valueTitles": {"placeholder": "(NOT HIDDEN)"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("kodi_password");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("kodi_password \"" + this.value + "\"");
						}
					}
				},
				"broadcast":
				{
					"broadcast_enable":
					{
						"title": "Enable Broadcast Mode Meta Output",
						"type": "toggle",
						"help": "This is for Twitch streamers to tie AArcade into their OBS overlay. It causes META info about the selected item be outputted into a file in the specified folder. It also outputs an event when a game is launched that includes the title of the game.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("broadcast_mode");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("broadcast_mode " + this.value);
						}
					},
					"broadcast_game":
					{
						"title": "Game Name",
						"type": "text",
						"help": "This is to control the name of the game you are set as broadcasting.",
						"valueTitles": {"placeholder": ""},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("broadcast_game");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("set_broadcast_game \"" + this.value + "\"");
						}
					},
					"broadcast_auto_game":
					{
						"title": "Automatically Set Game Name",
						"type": "toggle",
						"help": "This will cause AArcade to automatically set your game to the title of any item you launch, and then set it back to AArcade upon returning to AArcade & unpausing it after.",
						"valueTitles": {"0": "Disabled", "1": "Enabled"},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("broadcast_auto_game");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("broadcast_auto_game " + this.value);
						}
					},
					"broadcast_folder":
					{
						"title": "Broadcast Folder",
						"type": "text",
						"help": "This is the folder that meta output is written to, if enabled.",
						"valueTitles": {"placeholder": ""},
						"value": null,
						"getValue": function()
						{
							var val = aaapi.system.getConVarValue("broadcast_folder");
							this.value = val;
						},
						"setValue": function(val)
						{
							this.value = val;
							aaapi.system.consoleCommand("broadcast_folder \"" + this.value + "\"");
						}
					}
				}
			};

			function findOptionById(optionId)
			{
				var option;
				var categoriesKeys = Object.keys(categories);
				for( var i = 0; i < categoriesKeys.length; i++ )
				{
					category = categories[categoriesKeys[i]];
					option = category[optionId];
					if( !!option )
						break;
				}

				return option;
			}

			function fileBrowse(optionId)
			{
				var option = findOptionById(optionId);
				if( !!!option )
					return;

				var fieldElem;
				var elems = document.querySelectorAll(".aaKeyValueTableValue > input[type='text']");
				for( var i = 0; i < elems.length; i++ )
				{
					if( elems[i].inputOption === option )
					{
						fieldElem = elems[i];
						break;
					}
				}

				if( !!!fieldElem )
					return;

				arcadeHud.browseForFile(function(chosenFile)
				{
					fieldElem.value = chosenFile;
					fieldElem.focus();
					entryForm.querySelector("input[type='submit']").click();
				}.bind(fieldElem));
			}

			function parseNumber(num)
			{
				return Number(parseFloat(num).toFixed(2));
			}

			function onSlide(e)
			{
				var option = this.inputOption;
				var row = this.parentNode;
				var labelDiv = row.querySelector(".aaKeyValueTableValueTitle");
				var val = parseNumber(this.value);

				var valTitle = option.valueTitles[val + ""];
				if( !!valTitle )
					labelDiv.innerHTML = valTitle;
				else
					labelDiv.innerHTML = val;

				if( typeof option.onSlide === "function" )
					option.onSlide.call(option, val);
			}

			var category;
			var optionsTable;
			var option;
			var optionRow;
			var optionTitleCell;
			var optionValueCell;
			var toggleButton;
			var toggleButtonMarker;
			var toggleButtonValueLabel;
			var selectBox;
			var selectBoxOption;
			var sliderValueLabel;
			var title;

			// these might be obsolete!!
			var optionContainerElem;
			var inputOptionContainerElem;
			var inputOptionTitleElem;
			var inputOptionElem;
			var inputOptionToggleMarkerElem;

			for( var categoryId in categories )
			{
				category = categories[categoryId];
				optionsTable = document.querySelector("div[tabid='" + categoryId + "'] .aaKeyValueTable");

				for( var optionId in category )
				{
					option = category[optionId];
					option.getValue();

					// Now put stuff into it
					optionRow = document.createElement("tr");
					optionRow.className = "helpNote";
					optionRow.setAttribute("help", option.help);

					// OPTION TITLE
					optionTitleCell = document.createElement("td");
					optionTitleCell.className = "aaKeyValueTableKey aaTextColorTwoColor aaTextSizeFontSize";
					optionTitleCell.innerHTML = option.title + ":";

					// OPTION VALUE
					optionValueCell = document.createElement("td");
					optionValueCell.style.cssText = "text-align: right; padding: 4px; white-space: nowrap;";
					optionValueCell.className = "aaKeyValueTableValue";

					// AUX BUTTONS
					optionAuxCell = document.createElement("td");
					optionAuxCell.style.cssText = "";
					optionAuxCell.className = "aaKeyValueTableAux";

					if( option.type === "toggle" )
					{
						// TOGGLE BUTTON VALUE LABEL
						toggleButtonValueLabel = document.createElement("div");
						toggleButtonValueLabel.className = "aaKeyValueTableValueTitle aaTextColorTwoColor aaTextSizeFontSize";
						toggleButtonValueLabel.style.cssText = "font-family: Arial; font-size: 14px; display: inline-block; vertical-align: middle; padding: 0; padding-left: 30px; padding-right: 8px;";

						//if( option.type === "toggle" )
						//{
							title = option.valueTitles[option.value.toString()];
							toggleButtonValueLabel.innerHTML = title;
						//}

						toggleButton = document.createElement("div");
						toggleButton.className = "inputOptionToggle aaThemeColorTwoLowBorderColor aaThemeColorTwoHoverShadedBackground";//"inputOptionToggle aaTextColorTwoShadedBorderColor aaTextColorTwoShadedBackground";
						toggleButton.inputOption = option;
						toggleButton.addEventListener("click", function(e)
						{
							toggleSwitch(this);
						}.bind(toggleButton), true);

						toggleButtonMarker = document.createElement("div");
						toggleButtonMarker.className = "aaThemeColorOneHoverShadedBackground aaThemeColorOneShadedBorderColor";

						if( option.value + "" !== "0" )
						{
							toggleButtonMarker.className = "aaThemeColorOneHighBackgroundColor aaThemeColorOneHighBorderColor";//"aaThemeColorOneHoverShadedBackground aaThemeColorOneShadedBorderColor";
							toggleButtonMarker.className += " toggleSwitchOn";
						}
						else
							toggleButtonMarker.className = "aaThemeColorTwoLowBackgroundColor aaThemeColorTwoLowBorderColor";//"aaTextColorTwoBackgroundColor aaTextColorTwoBorderColor";

						// composite
						toggleButton.appendChild(toggleButtonMarker);
						optionValueCell.appendChild(toggleButtonValueLabel);
						optionValueCell.appendChild(toggleButton);
					}
					else if( option.type === "slider" )
					{
						// SLIDER VALUE LABEL
						sliderValueLabel = document.createElement("div");
						sliderValueLabel.className = "aaKeyValueTableValueTitle aaTextColorTwoColor aaTextSizeFontSize";
						sliderValueLabel.style.cssText = "font-family: Arial; font-size: 14px; display: inline-block; vertical-align: middle; padding: 0; padding-left: 30px; padding-right: 8px;";

						//title = option.valueTitles[option.value.toString()];
						var val = parseNumber(option.value);
						var valTitle = option.valueTitles[val + ""];
						if( !!valTitle )
							sliderValueLabel.innerHTML = valTitle;
						else
							sliderValueLabel.innerHTML = val;

						var slider = document.createElement("input");
						slider.inputOption = option;
						slider.type = "range";
						slider.min = option.sliderMin;
						slider.max = option.sliderMax;
						slider.step = option.sliderStep;
						slider.value = val;
						slider.style.backgroundColor = "#ddd";
						slider.addEventListener("input", onSlide.bind(slider), true);

						slider.addEventListener("mouseup", function(e)
						{

							var option = this.inputOption;

							var val = parseNumber(this.value);
							if( val == option.value )
								return;

							this.style.backgroundColor = "";
							this.style.webkitTransition = "initial";
							this.classList.add("aaThemeColorOneBackgroundColor");
							this.offsetTop;
							this.style.webkitTransition = "background-color 0.5s ease-in-out";
							this.classList.remove("aaThemeColorOneBackgroundColor");
							this.style.backgroundColor = "#ddd";

							this.value = val;
							option.setValue.call(option, val);
						}.bind(slider), true);

						optionValueCell.appendChild(sliderValueLabel);
						optionValueCell.appendChild(slider);
					}
					else if( option.type === "select" )
					{
						selectBox = document.createElement("select");
						selectBox.className = "aaTextSizeFontSize";
						//selectBox.style.direction = "rtl";
						selectBox.inputOption = option;

						selectBox.addEventListener("change", function(e)
						{
							var selectedIndex = this.selectedIndex;
							var selectedOption = this.options[selectedIndex];

							var option = this.inputOption;
							option.setValue.call(option, selectedOption.value);

							this.style.webkitTransition = "initial";
							this.classList.add("aaThemeColorOneBackgroundColor");
							this.offsetTop;
							this.style.webkitTransition = "background-color 0.5s ease-in-out";
							this.classList.remove("aaThemeColorOneBackgroundColor");
						}.bind(selectBox), true);

						//<option value="" disabled selected>Select your option</option>

						if( !!option.valueTitles.placeholder )
						{
							selectBoxOption = document.createElement("option");
							selectBoxOption.text = option.valueTitles.placeholder;
							selectBoxOption.value = "";
							selectBoxOption.selected = true;
							selectBoxOption.disabled = true;
							selectBox.appendChild(selectBoxOption);
						}

						for( var value in option.valueTitles )
						{
							if( value === "placeholder" )
								continue;

							selectBoxOption = document.createElement("option");
							selectBoxOption.text = option.valueTitles[value];
							selectBoxOption.value = value;

							if( value == option.value )
								selectBoxOption.selected = true;

							selectBox.appendChild(selectBoxOption);
						}

						// compose
						optionValueCell.appendChild(selectBox);

						/*
						// TOGGLE BUTTON VALUE LABEL
						toggleButtonValueLabel = document.createElement("div");
						toggleButtonValueLabel.className = "aaKeyValueTableValueTitle aaTextColorTwoColor aaTextSizeFontSize";
						toggleButtonValueLabel.style.cssText = "display: inline-block; vertical-align: middle; padding: 0; padding-left: 30px; padding-right: 8px;";

						title = option.valueTitles[option.value.toString()];
						toggleButtonValueLabel.innerHTML = title;
						*/

						/*
						toggleButton = document.createElement("div");
						toggleButton.className = "inputOptionToggle aaTextColorTwoShadedBorderColor aaThemeColorTwoHoverShadedBackground";
						toggleButton.inputOption = option;
						toggleButton.addEventListener("click", function(e)
						{
							toggleSwitch(this);
						}.bind(toggleButton), true);

						toggleButtonMarker = document.createElement("div");
						toggleButtonMarker.className = "aaThemeColorOneHoverShadedBackground aaThemeColorOneShadedBorderColor";

						if( option.value + "" !== "0" )
						{
							toggleButtonMarker.className = "aaThemeColorOneHoverShadedBackground aaThemeColorOneShadedBorderColor";
							toggleButtonMarker.className += " toggleSwitchOn";
						}
						else
							toggleButtonMarker.className = "aaTextColorTwoBackgroundColor aaTextColorTwoBorderColor";

						// composite
						toggleButton.appendChild(toggleButtonMarker);
						optionValueCell.appendChild(toggleButtonValueLabel);
						optionValueCell.appendChild(toggleButton);
						*/
					}
					else if( option.type === "webfile" )
					{
						optionAuxCell.innerHTML = '\
						<div class="aaButton aaKeyValuesRowButton aaTextSizeFontSize aaThemeColorTwoHoverShadedBackground aaTextColorTwoColor aaThemeColorTwoLowBorderColor" style="min-width: initial; padding: 6px; width: 18px; height: 18px; margin-left: 4px; display: inline-block;" onclick="fileBrowse(\'' + optionId + '\');">\
								' + arcadeHud.generateIconHTML("browseicon.png", 18, 18, "aaTextColorTwoHighColor") + '\
						</div>';

						textBox = document.createElement("input");
						textBox.type = "text";

						textBox.className = "aaTextSizeFontSize";
						textBox.inputOption = option;
						textBox.value = option.value;
						textBox.placeholder = option.valueTitles["placeholder"];
						textBox.addEventListener("blur", function(e)
						{
							if( this.value != this.inputOption.value )
								this.value = this.inputOption.value;
						}.bind(textBox), true);

						optionValueCell.appendChild(textBox);
					}
					else if( option.type === "text" || option.type === "password" )
					{
						textBox = document.createElement("input");

						if( option.title.toLowerCase().indexOf("password") === -1 )
							textBox.type = "text";
						else
							textBox.type = "password";

						textBox.className = "aaTextSizeFontSize";
						textBox.inputOption = option;
						textBox.value = option.value;
						textBox.placeholder = option.valueTitles["placeholder"];
						textBox.addEventListener("blur", function(e)
						{
							this.value = this.inputOption.value;
						}.bind(textBox), true);

						optionValueCell.appendChild(textBox);
					}
/*
					optionContainerElem.appendChild(optionTitleElem);
					optionContainerElem.appendChild(inputOptionContainerElem);

					optionsContainerElem.appendChild(optionContainerElem);
					*/

					optionRow.appendChild(optionTitleCell);
					//optionRow.appendChild(optionValueTitleCell);
					optionRow.appendChild(optionValueCell);
					optionRow.appendChild(optionAuxCell);
					optionsTable.appendChild(optionRow);
				}
			}

			function onInputOptionTextFormSubmit(option, value)
			{
				option.setValue.call(option, value);
			}

			function toggleSwitch(toggleButton)
			{
				var row = toggleButton.parentNode.parentNode;

				var labelDiv = row.querySelector(".aaKeyValueTableValueTitle");
				var toggleButtonMarker = toggleButton.querySelector("div");

				if( toggleButtonMarker.classList.contains("toggleSwitchOn") )
				{
					toggleButtonMarker.classList.remove("toggleSwitchOn");
					toggleButtonMarker.classList.remove("aaThemeColorOneHighBackgroundColor");
					toggleButtonMarker.classList.remove("aaThemeColorOneHighBorderColor");

					toggleButtonMarker.classList.add("aaThemeColorTwoLowBackgroundColor");
					toggleButtonMarker.classList.add("aaThemeColorTwoLowBorderColor");

					var valueTitleKeys = Object.keys(toggleButton.inputOption.valueTitles);
					var valueTitle;
					for( var i = 0; i < valueTitleKeys.length; i++ )
					{
						if( valueTitleKeys[i] !== toggleButton.inputOption.value.toString() )
						{
							labelDiv.innerHTML = toggleButton.inputOption.valueTitles[valueTitleKeys[i]];
							toggleButton.inputOption.setValue(valueTitleKeys[i]);
							break;
						}
					}
				}
				else
				{
					toggleButtonMarker.classList.add("toggleSwitchOn");
					toggleButtonMarker.classList.remove("aaThemeColorTwoLowBackgroundColor");
					toggleButtonMarker.classList.remove("aaThemeColorTwoLowBorderColor");
					toggleButtonMarker.classList.add("aaThemeColorOneHighBackgroundColor");
					toggleButtonMarker.classList.add("aaThemeColorOneHighBorderColor");

					var valueTitleKeys = Object.keys(toggleButton.inputOption.valueTitles);
					var valueTitle;
					for( var i = 0; i < valueTitleKeys.length; i++ )
					{
						if( valueTitleKeys[i] !== toggleButton.inputOption.value.toString() )
						{
							labelDiv.innerHTML = toggleButton.inputOption.valueTitles[valueTitleKeys[i]];
							toggleButton.inputOption.setValue(valueTitleKeys[i]);
							break;
						}
					}
				}

				var option = toggleButton.inputOption;
				toggleButton.style.webkitTransition = "initial";
				toggleButton.classList.add("aaThemeColorOneShadedBorderColor");
				toggleButton.offsetTop;
				toggleButton.style.webkitTransition = "border-color 0.5s ease-in-out";
				toggleButton.classList.remove("aaThemeColorOneShadedBorderColor");
				//toggleButton.blur();
				//aaTextColorTwoShadedBorderColor aaThemeColorTwoHoverShadedBackground
			}
		</script>

	</body>
</html>