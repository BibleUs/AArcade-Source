<html>
	<head>
		<link rel="stylesheet" type="text/css" href="asset://ui/hud.css"></link>
		<script src="asset://ui/hud.js"></script>
		<script>
			var itemContainer;
		</script>
	</head>
	<body>
		<div class="hudHeaderContainer"></div>

		<div class="hudContent" style="width: 50%; position: fixed; left: 0; right: 0; top: 45%; -webkit-transform: translate(0, -50%);">
			<div class="hudContentHeader">
				<div class="hudContentHeaderRow">
					<div class="hudContentHeaderCell">
						<div class="hudContentHeaderButton helpNote" style="display: block;" onclick="window.location='asset://ui/items.html';" help="Go back to the previous menu.">
							&nbsp;<img src="asset://ui/backarrow.png" />&nbsp;
						</div>
					</div>
					<div class="hudContentHeaderCell">
						Libray / Items / Edit
					</div>
					<div class="hudContentHeaderCell">
						<div class="hudContentHeaderButton helpNote" onclick="window.location='asset://ui/blank.html';" help="Close this menu, but leave the HUD open.">
							&nbsp;<img src="asset://ui/xicon.png" />&nbsp;
						</div>
					</div>
				</div>
			</div>
			<div id="itemContainer"></div>
		</div>

		<a href="javascript:location.reload();" class="devReload">&bull;</a>

		<script>
// http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

			var id = getParameterByName("id");
			itemContainer = document.querySelector("#itemContainer");

			var fieldHelp = {
				"app": "(OPTIONAL) Apps are useful when Windows can't launch a particular shortcut by itself. They are similar to using \"Open With\" when launching a regular desktop shortcut, but far more powerful.",
				"description": "(OPTIONAL) A brief description of the shortcut. Not really shown anywhere, but useful for searching.",
				"download": "(OPTIONAL) An internet URI where the local file that this shortcut launches can be downloaded, if applicable.",
				"file": "The local file location or internet URI that this shortcut launches.",
				"marquee": "(OPTIONAL) A local file location or internet URI of the image to use as the marquee on this shortcut's 3D model.",
				"model": "(OPTIONAL) The recommended 3D model to use when first spawning this shortcut.",
				"preview": "(OPTIONAL) An internet URI to show on the shortcut's screen as a preview for when it gets selected.",
				"reference": "(OPTIONAL) The internet URI to a unique wiki or reference page describing this shortcut, if applicable.",
				"screen": "(OPTIONAL) A local file location or internet URI of the image to use as the screen on this shortcut's 3D model.",
				"stream": "(OPTIONAL) An internet URI where a version of this shortcut's item can be streamed, rather than launching the shortcut to the local file version, if applicable.",
				"title": "A short, unique, & descriptive title.",
				"type": "(OPTIONAL) The type of this shortcut. Useful for searching, and especially useful for shortcuts that require \"Open With\" apps to launch."
			};

			var x, help, fieldContainer, fieldKey, fieldKeyNode, fieldValue, fieldValueInput;
			var item = aaapi.library.getLibraryItem(id);
			for( var x in item )
			{
				if( x === "info" )
					continue;

				fieldContainer = document.createElement("div");
				fieldContainer.className = "fieldContainer";

				fieldKey = document.createElement("div");
				fieldKeyNode = document.createTextNode(x);
				fieldKey.appendChild(fieldKeyNode);
				fieldContainer.appendChild(fieldKey);

				fieldValue = document.createElement("div");

				if( x === "type" )
				{
					var fieldValueSelect = document.createElement("select");
/*
					var type = aaapi.library.getLibraryType(item[x]);
					if(item[x] != 0)
					{
						*/

					var types = aaapi.library.getAllLibraryTypes();
					var x;
					for( y in types )
					{
						var type = types[y];
						var fieldValueOption = document.createElement("option");
						fieldValueOption.value = type.info.id;
						fieldValueOption.text = type.title;
						fieldValueSelect.appendChild(fieldValueOption);
					}

					fieldValueSelect.value = item[x];
					fieldValue.appendChild(fieldValueSelect);
				}
				else
				{
					fieldValueInput = document.createElement("input");
					fieldValueInput.type = "text";
					fieldValueInput.value = item[x];
					fieldValue.appendChild(fieldValueInput);
				}

				fieldContainer.appendChild(fieldValue);
				itemContainer.appendChild(fieldContainer);

				help = fieldHelp[x];
				if( !!help )
				{
					fieldContainer.setAttribute("help", help);
					arcadeHud.assignHelp(fieldContainer);
				}
			}
		</script>
	</body>
</html>