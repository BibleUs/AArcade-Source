<html>
	<head>
	</head>
	<body style="background-color: #fff;">
		<script>
// http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

function ExtractYouTubeId(trailerURL)
{
  if( typeof trailerURL === "undefined" )
    return trailerURL;

  var youtubeid;
  if( trailerURL.indexOf("youtube") != -1 && trailerURL.indexOf("v=") != -1 )
  {
    youtubeid = trailerURL.substr(trailerURL.indexOf("v=")+2);

    var found = youtubeid.indexOf("&");
    if( found > -1 )
    {
      youtubeid = youtubeid.substr(0, found);
    }
  }
  else
  {
    var found = trailerURL.indexOf("youtu.be/");
    if( found != -1 )
    {
      youtubeid = trailerURL.substr(found+9);

      found = youtubeid.indexOf("&");
      if( found != -1 )
      {
        youtubeid = youtubeid.substr(0, found);
      }
    }
  }

  return youtubeid;
}

			var preview = decodeURIComponent(getParameterByName("preview"));
			var file = decodeURIComponent(getParameterByName("file"));
			var screen = decodeURIComponent(getParameterByName("screen"));
			var marquee = decodeURIComponent(getParameterByName("marquee"));

			var youTubeId = ExtractYouTubeId(preview);
			if( !!!youTubeId )
				youTubeId = ExtractYouTubeId(file);

			if( !!youTubeId )
				window.location = "http://smarcade.net/dlcv2/view_youtube.php?id=" + youTubeId + "&autoplay=1";
			else
			{
        var imageEndings = ["jpg", "jpeg", "gif", "png"];

        var fieldValue = "";
				if( preview != "")
          fieldValue = preview;
				else if( file.indexOf("http") === 0 )
          fieldValue = file;
				else if( screen != "" )
          fieldValue = screen;
				else if( marquee != "" )
          fieldValue = marquee;

        var extension = fieldValue;
        var found = extension.lastIndexOf("/");
        if( found >= 0 )
          extension = extension.substring(found+1);

        found = extension.indexOf("?");
        if( found >= 0)
          extension = extension.substring(0, found);

        found = extension.indexOf("#");
        if( found >= 0)
          extension = extension.substring(0, found);

        found = extension.indexOf(":");
        if( found >= 0 )
          extension = extension.substring(0, found);

        found = extension.lastIndexOf(".");
        if( found >= 0 )
          extension = extension.substring(found+1);

        if( imageEndings.indexOf(extension) >= 0 )
          window.location = "asset://ui/showImage.html?uri=" + encodeURIComponent(fieldValue);
        else
				  window.location = fieldValue;
			}
		</script>
	</body>
</html>